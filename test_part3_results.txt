BEGIN
DELETE 1
DELETE 0
DELETE 1
INSERT 0 2
INSERT 0 1
INSERT 0 1
            test_case             
----------------------------------
 测试用例11：使用今天过期的卡签到
(1 row)

                                                            handle_check_in                                                            
---------------------------------------------------------------------------------------------------------------------------------------
 {"isExtra": false, "message": "签到成功", "success": true, "checkInId": "791953a1-0d5d-40b3-a40b-9c47efb2a2a6", "isNewMember": false}
(1 row)

                test_case                
-----------------------------------------
 测试用例12：使用只剩1次课时的私教卡签到
(1 row)

                                                            handle_check_in                                                            
---------------------------------------------------------------------------------------------------------------------------------------
 {"isExtra": false, "message": "签到成功", "success": true, "checkInId": "243569ef-2421-432e-bdc6-843f18aaeaed", "isNewMember": false}
(1 row)

                         test_case                          
------------------------------------------------------------
 测试用例13：尝试再次使用已用完课时的私教卡签到（应该失败）
(1 row)

                                                            handle_check_in                                                            
---------------------------------------------------------------------------------------------------------------------------------------
 {"isExtra": false, "message": "签到成功", "success": true, "checkInId": "97633f44-a4fb-49ff-b688-c17ef7a804c9", "isNewMember": false}
(1 row)

           test_case            
--------------------------------
 测试用例14：测试无效的课程类型
(1 row)

                                                           handle_check_in                                                           
-------------------------------------------------------------------------------------------------------------------------------------
 {"error": "invalid input value for enum class_type: \"invalid_type\"", "message": "无效的课程类型: invalid_type", "success": false}
(1 row)

          test_case           
------------------------------
 测试用例15：测试无效的时间段
(1 row)

                                            handle_check_in                                             
--------------------------------------------------------------------------------------------------------
 {"message": "无效的时间段: invalid_time_slot\nInvalid time slot: invalid_time_slot", "success": false}
(1 row)

              test_case               
--------------------------------------
 测试用例16：测试私教课但不提供教练ID
(1 row)

                                                                         handle_check_in                                                                          
------------------------------------------------------------------------------------------------------------------------------------------------------------------
 {"isExtra": true, "message": "您暂无有效的私教卡，已记录为额外签到", "success": true, "checkInId": "1309ea61-1fc6-4b17-912c-29091cdb4f8b", "isNewMember": false}
(1 row)

              test_case               
--------------------------------------
 测试用例17：测试非私教课但提供教练ID
(1 row)

                                 handle_check_in                                  
----------------------------------------------------------------------------------
 {"message": "今天已经在这个时段签到过了", "success": false, "isDuplicate": true}
(1 row)

           test_case            
--------------------------------
 测试用例18：测试不存在的教练ID
(1 row)

                                                handle_check_in                                                
---------------------------------------------------------------------------------------------------------------
 {"message": "今天已经签到过这个时段的课程。\nAlready checked in for this time slot today.", "success": false}
(1 row)

          result_title          
--------------------------------
 测试结果：边界条件会员签到记录
(1 row)

     name      | check_in_date | class_type |  time_slot  | is_extra | trainer_name | is_1v2 
---------------+---------------+------------+-------------+----------+--------------+--------
 测试边界会员1 | 2025-03-02    | morning    | 09:00-10:30 | f        |              | f
 测试边界会员2 | 2025-03-02    | private    | 10:30-12:00 | f        | Da           | f
 测试边界会员1 | 2025-03-02    | private    | 10:30-12:00 | t        |              | f
 测试边界会员2 | 2025-03-03    | private    | 10:30-12:00 | f        | Da           | f
(4 rows)

         result_title         
------------------------------
 测试结果：边界条件会员卡状态
(1 row)

     name      | card_type | card_category | card_subtype | remaining_group_sessions | remaining_private_sessions | valid_until 
---------------+-----------+---------------+--------------+--------------------------+----------------------------+-------------
 测试边界会员1 | group     | session       | 10_sessions  |                        3 |                            | 
 测试边界会员2 | private   | session       | 10_sessions  |                          |                          1 | 
(2 rows)

    result_title     
---------------------
 测试结果：debug日志
(1 row)

 message | details 
---------+---------
(0 rows)

COMMIT
