BEGIN
             test_case              
------------------------------------
 测试用例4：老会员私教课签到（1v1）
(1 row)

                                 handle_check_in                                  
----------------------------------------------------------------------------------
 {"message": "今天已经在这个时段签到过了", "success": false, "isDuplicate": true}
(1 row)

             test_case              
------------------------------------
 测试用例5：老会员私教课签到（1v2）
(1 row)

                                 handle_check_in                                  
----------------------------------------------------------------------------------
 {"message": "今天已经在这个时段签到过了", "success": false, "isDuplicate": true}
(1 row)

          test_case          
-----------------------------
 测试用例6：额外签到（无卡）
(1 row)

                                 handle_check_in                                  
----------------------------------------------------------------------------------
 {"message": "今天已经在这个时段签到过了", "success": false, "isDuplicate": true}
(1 row)

                       test_case                       
-------------------------------------------------------
 测试用例7：使用过期卡签到（应该成功并记录为额外签到）
(1 row)

                                                                        handle_check_in                                                                         
----------------------------------------------------------------------------------------------------------------------------------------------------------------
 {"isExtra": true, "message": "您的会员卡已过期，已记录为额外签到", "success": true, "checkInId": "cf848dc8-5528-44a0-8273-46a7dd3f6bc6", "isNewMember": false}
(1 row)

                  test_case                  
---------------------------------------------
 测试用例8：使用课时用完的卡签到（应该失败）
(1 row)

                                 handle_check_in                                  
----------------------------------------------------------------------------------
 {"message": "今天已经在这个时段签到过了", "success": false, "isDuplicate": true}
(1 row)

            test_case            
---------------------------------
 测试用例9：重复签到（应该失败）
(1 row)

                                 handle_check_in                                  
----------------------------------------------------------------------------------
 {"message": "今天已经在这个时段签到过了", "success": false, "isDuplicate": true}
(1 row)

                                 handle_check_in                                  
----------------------------------------------------------------------------------
 {"message": "今天已经在这个时段签到过了", "success": false, "isDuplicate": true}
(1 row)

              test_case               
--------------------------------------
 测试用例10：使用JR教练进行私教课签到
(1 row)

                                 handle_check_in                                  
----------------------------------------------------------------------------------
 {"message": "今天已经在这个时段签到过了", "success": false, "isDuplicate": true}
(1 row)

      result_title      
------------------------
 测试结果：会员签到记录
(1 row)

       name       | check_in_date | class_type |  time_slot  | is_extra | trainer_name | is_1v2 
------------------+---------------+------------+-------------+----------+--------------+--------
 测试额外签到会员 | 2025-03-02    | morning    | 09:00-10:30 | t        |              | f
 测试新会员       | 2025-03-02    | morning    | 09:00-10:30 | t        |              | f
 测试老会员       | 2025-03-02    | morning    | 09:00-10:30 | f        |              | f
 测试额外签到会员 | 2025-03-02    | private    | 10:30-12:00 | t        | Da           | f
 测试老会员       | 2025-03-02    | private    | 10:30-12:00 | f        | Da           | f
 测试额外签到会员 | 2025-03-02    | evening    | 17:00-18:30 | t        |              | f
 测试老会员       | 2025-03-02    | evening    | 17:00-18:30 | t        |              | f
 测试新会员       | 2025-03-02    | evening    | 17:00-18:30 | t        |              | f
 测试老会员       | 2025-03-03    | private    | 10:30-12:00 | f        | Da           | t
 测试老会员       | 2025-03-04    | private    | 10:30-12:00 | f        | JR           | f
(10 rows)

     result_title     
----------------------
 测试结果：会员卡状态
(1 row)

       name       | card_type | card_category |  card_subtype  | remaining_group_sessions | remaining_private_sessions | valid_until 
------------------+-----------+---------------+----------------+--------------------------+----------------------------+-------------
 测试老会员       | group     | session       | 10_sessions    |                       10 |                            | 2025-06-02
 测试老会员       | group     | monthly       | single_monthly |                          |                            | 2025-04-01
 测试老会员       | private   | session       | 10_sessions    |                          |                         10 | 2025-04-02
 测试额外签到会员 | group     | session       | 10_sessions    |                        5 |                            | 2025-02-02
 测试额外签到会员 | private   | session       | 10_sessions    |                          |                          0 | 2025-04-02
(5 rows)

        result_title        
----------------------------
 测试结果：会员额外签到次数
(1 row)

       name       | extra_check_ins 
------------------+-----------------
 测试新会员       |               6
 测试老会员       |               2
 测试额外签到会员 |               9
(3 rows)

COMMIT
